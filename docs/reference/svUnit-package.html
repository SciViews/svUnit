<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>SciViews - Unit, Integration and System Testing — svUnit-package • svUnit</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="SciViews - Unit, Integration and System Testing — svUnit-package" />
<meta property="og:description" content="The SciViews svUnit package defines a framework for testing R code, not unlike
  jUnit for Java. It is inspired on the checkxxx() functions from the
  RUnit package and the same test unit files should be compatible with both
  svUnit and RUnit. However, the internal implementation is completely different
  and svUnit can also be used interactively, while RUnit is only designed to run
  test units written in files on disks." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">svUnit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/svUnit.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/SciViews/svUnit/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>SciViews - Unit, Integration and System Testing</h1>
    
    <div class="hidden name"><code>svUnit-package.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The SciViews svUnit package defines a framework for testing R code, not unlike
  jUnit for Java. It is inspired on the <code>checkxxx()</code> functions from the
  RUnit package and the same test unit files should be compatible with both
  svUnit and RUnit. However, the internal implementation is completely different
  and svUnit can also be used interactively, while RUnit is only designed to run
  test units written in files on disks.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p></p><table class='table'>
<tr><td>Package:</td><td>svUnit</td></tr>
<tr><td>Type:</td><td>Package</td></tr>
<tr><td>Version:</td><td>1.0.0</td></tr>
<tr><td>Date:</td><td>2020-04-12</td></tr>
<tr><td>License:</td><td>GPL 2 or above, at your convenience</td></tr>
</table>


<p>The test unit framework provided in svUnit is based on tests, also called
  assertions, implemented in <code>checkxxx()</code> functions. For instance, the
  <code><a href='check.html'>checkTrue(expr)</a></code> function check if its 'expr' argument returns
  <code>TRUE</code>. Results of these assertions are collected in a centralized logger
  located in the <code>.Log</code> object in .GlobalEnv. This is a 'svSuiteData'
  object with data about the context of the tests (see for instance,
  <code><a href='Log.html'>lastTest()</a></code>, <code><a href='Log.html'>lastSuite()</a></code> or <code><a href='svSuiteData.html'>metadata(.Log)</a></code>).</p>
<p>Assertions can give three results: (1) <code>TRUE</code> if success,
  (2) <code>FALSE</code> in case of failure (in our example, 'expr' in
  <code><a href='check.html'>checkTrue(expr)</a></code> did not return <code>TRUE</code>), and (3) <code>NA</code> if the
  code in 'expr' cannot be parsed or executed correctly. All these errors or
  failures are catch and recorded in the logger, as individual 'svTestData'
  objects.</p>
<p>Both the logger ('svSuiteData' object) and test records inside it
  ('svTestData' objects) have convenient methods to visualize information they
  contain: <code><a href='https://rdrr.io/r/base/print.html'>print()</a></code>, <code><a href='https://rdrr.io/r/base/summary.html'>summary()</a></code> and <code><a href='svTestData.html'>stats()</a></code> methods. Access
  to the individual test records in the logger is done with list-like
  instructions: <code>.Log$mytest</code> returns the 'svTestData' object named
  'mytest', itself the result of running test in the 'mytest' test function
  (i.e., <code><a href='svTest.html'>runTest(mytest)</a></code>, see hereunder). Assertions run at the command
  line, outside of specific contexts provided by test functions, test units and
  test suites (see hereunder) are recorded under the 'eval' 'svTestData' object
  in the logger (i.e., <code>.Log$eval</code>).</p>
<p>Since a 'svSuiteData' object (the logger) is also an environment, you can get
  the list of all test records it contains using <code><a href='https://rdrr.io/r/base/ls.html'>ls(.Log)</a></code>, and you can
  eliminate a given test record using something like:
  <code><a href='https://rdrr.io/r/base/rm.html'>rm(mytest, envir = .Log)</a></code>.</p>
<p>Test cases are collections of assertions with the satellite code needed to
  build example or situations to be tested. They are collected together in
  argument-less functions with class being 'svTest'. See <code><a href='svTest.html'>?svTest</a></code> for
  further explanations and a couple of example test cases/test functions.</p>
<p>In its simplest instance, a test function is defined as a separate R object
  loaded in memory (unlike RUnit where all test must be defined in files). You
  run it simply by using <code><a href='svTest.html'>runTest(mytest)</a></code>. A slightly more structured way
  to work is to attach the test function to the object it testes. You use
  <code>test(myobj) &lt;- testmyobj</code> to do so, and retrieve it with
  <code><a href='svTest.html'>test(myobj)</a></code>. Now, the test function always follows the tested object.
  Testing the object is still simple by using <code><a href='svTest.html'>runTest(myobj)</a></code>, which is
  totally equivalent to <code><a href='svTest.html'>runTest(test(myobj))</a></code>. One can determine if an
  object has a test function associated, or is a test function itself by using
  <code><a href='svTest.html'>is.test(myobj)</a></code>.</p>
<p>Several test functions can be collected together in so-called test units. A
  test unit only exists on disk. It is a file named 'runit*.R' containing
  sourceable R code with test functions having names starting with 'test'
  (unlike RUnit, the default convention of file names starting with 'runit' and
  test function names starting with 'test' is not customizable in svUnit). One
  can also define special <code>.setUp()</code> and <code>.tearDown()</code> functions in
  the unit. The first function will be run before each test function, and the
  latter one will be run after it. Test units are created manually, or from a
  collection of objects with associated test functions loaded in an environment
  (usually .GlobalEnv) thanks to the <code><a href='svTest.html'>makeUnit()</a></code> method. These units
  should be mutually compatible with those used in the RUnit package (at least
  this is verified with version 0.4-17 of RUnit).</p>
<p>Test units defined for packages should be located in the package /runitTests
  subdirectory (/inst/runitTests for source of the package) or one of its
  subdirectories. That way, they are located automatically by the function
  <code><a href='svSuite.html'>svSuiteList()</a></code> that also automatically detects all objects with
  associated test functions loaded in .GlobalEnv. Test suites are 'svSuite'
  objects with a list of test units or test objects to collect in the suite.
  Thus, <code><a href='svSuite.html'>svSuiteList()</a></code> automatically builds such a suite with all tests it
  finds in R, with many possibilities to filter packages' test units, objects'
  test functions, or to add non standard directories with test units, for
  instance. See <code><a href='svSuite.html'>?svSuite</a></code> for more details on creating and using these
  suites.</p>
<p>A GUI (Graphical User Interface) is provided to automatically build and run
  tests suites and to get a graphical (tree) interactive report of the results
  in the Komodo Edit or IDE code editor, together with the SciViews-K extension.
  If you want to use this (optional) GUI, visit
  http://www.sciviews/org/SciViews-K to install required software components on
  your machine.</p>
<p>Finally, the svUnit framework is compatible with R CMD check (see the manual
  "Writing R extensions"). You simply define man pages (.Rd files) with an
  example section running selected test units from your package. The function
  <code><a href='Log.html'>errorLog()</a></code> is designed to generate and error if one or more tests
  failed or raised an error during R CMD check, and it should be used at the end
  of the example that runs your unit test(s). That way, R CMD check is
  interrupted and a detailed report of the tests that failed or raised an error
  is printed. See an example in <code><a href='unitTests.svUnit.html'>?unitTests.svUnit</a></code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>There is a huge litterature and unit testing. An easy starting point is:
  http://en.wikipedia.org/wiki/Unit\_test.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/RUnit/man/RUnit-intro.html'>RUnit</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Clear the logger</span>
<span class='fu'><a href='Log.html'>clearLog</a></span>()

<span class='co'>## Design and attach a simple test function to an object</span>
<span class='no'>foo</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>y</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='fu'><a href='https://rdrr.io/r/base/function.html'>return</a></span>(<span class='no'>x</span> * <span class='no'>y</span>)
<span class='no'>testfoo</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span> () {
    <span class='co'>#DEACTIVATED()	# Use this to deactive the test (notice placed in the log)</span>
    <span class='fu'><a href='check.html'>checkEqualsNumeric</a></span>(<span class='fl'>5</span>, <span class='fu'>foo</span>(<span class='fl'>2</span>),       <span class='st'>"Check return of foo()"</span>)
        <span class='fu'><a href='check.html'>checkException</a></span>(<span class='fu'>foo</span>(<span class='st'>"b"</span>),                <span class='st'>"Wrong first argument"</span>)
    <span class='fu'><a href='check.html'>checkException</a></span>(<span class='fu'>foo</span>(<span class='fl'>2</span>, <span class='st'>"a"</span>),         <span class='st'>"Wrong second argument"</span>)

}
<span class='co'>## Attach this to the foo function</span>
<span class='fu'><a href='svTest.html'>test</a></span>(<span class='no'>foo</span>) <span class='kw'>&lt;-</span> <span class='no'>testfoo</span>

<span class='co'>## Run this test</span>
<span class='fu'><a href='svTest.html'>runTest</a></span>(<span class='no'>foo</span>)</div><div class='output co'>#&gt; * Check return of foo(): checkEqualsNumeric(5, foo(2)) run in less than 0.001 sec ... **FAILS**
#&gt; Mean relative difference: 0.2
#&gt;  num 4</div><div class='input'>
<span class='co'>## Inspect the result</span>
<span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span>(<span class='no'>.Log</span>)</div><div class='output co'>#&gt; [1] "test(foo)"</div><div class='input'><span class='no'>.Log</span>$<span class='no'>`test(foo)`</span></div><div class='output co'>#&gt; 
#&gt; == test(foo) run in less than 0.1 sec: **FAILS**
#&gt; 
#&gt; //Pass: 2 Fail: 1 Errors: 0//
#&gt; 
#&gt; * Check return of foo(): checkEqualsNumeric(5, foo(2)) run in less than 0.001 sec ... **FAILS**
#&gt; Mean relative difference: 0.2
#&gt;  num 4</div><div class='input'><span class='co'>## This test fails. You see that the test function requires that foo(2) = 5 and</span>
<span class='co'>## the actual implementation returns 4. This is a trivial, useless example, but</span>
<span class='co'>## you are supposed to correct the function. For instance:</span>
<span class='no'>foo</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>y</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='fu'><a href='https://rdrr.io/r/base/function.html'>return</a></span>(<span class='no'>x</span> * <span class='no'>y</span> + <span class='fl'>1</span>)
<span class='fu'><a href='svTest.html'>test</a></span>(<span class='no'>foo</span>) <span class='kw'>&lt;-</span> <span class='no'>testfoo</span>

(<span class='fu'><a href='svTest.html'>runTest</a></span>(<span class='no'>foo</span>))  <span class='co'># Now, that's fine!</span></div><div class='output co'>#&gt; 
#&gt; == test(foo) run in less than 0.1 sec: OK
#&gt; 
#&gt; //Pass: 3 Fail: 0 Errors: 0//
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://phgrosjean.sciviews.org'>Philippe Grosjean</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


