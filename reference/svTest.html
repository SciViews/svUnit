<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create, attach to and manipulate test functions in R objects — makeTestListFromExamples • svUnit</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create, attach to and manipulate test functions in R objects — makeTestListFromExamples" />
<meta property="og:description" content="Test functions are functions without arguments with class 'svTest' containing
one or more assertions using checkxxx() functions. They can be
attached to any object as a 'test' attribute. They can also be transferred
into a more formal test unit file on disk by applying the makeUnit() method." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">svUnit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/svUnit.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/SciViews/svUnit/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create, attach to and manipulate test functions in R objects</h1>
    <small class="dont-index">Source: <a href='https://github.com/SciViews/svUnit/blob/master/R/runExamples.R'><code>R/runExamples.R</code></a>, <a href='https://github.com/SciViews/svUnit/blob/master/R/svTest.R'><code>R/svTest.R</code></a></small>
    <div class="hidden name"><code>svTest.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Test functions are functions without arguments with class 'svTest' containing
one or more assertions using <code>checkxxx()</code> functions. They can be
attached to any object as a 'test' attribute. They can also be transferred
into a more formal test unit file on disk by applying the <code>makeUnit()</code> method.</p>
    </div>

    <pre class="usage"><span class='fu'>makeTestListFromExamples</span>(<span class='no'>packageName</span>, <span class='no'>manFilesDir</span>, <span class='kw'>skipFailing</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>svTest</span>(<span class='no'>testFun</span>)

<span class='co'># S3 method for svTest</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>as.svTest</span>(<span class='no'>x</span>)

<span class='fu'>is.svTest</span>(<span class='no'>x</span>)

<span class='fu'>is.test</span>(<span class='no'>x</span>)

<span class='fu'>test</span>(<span class='no'>x</span>)

<span class='fu'>test</span>(<span class='no'>x</span>) <span class='kw'>&lt;-</span> <span class='no'>value</span>

<span class='fu'>makeUnit</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>makeUnit</span>(
  <span class='no'>x</span>,
  <span class='kw'>name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/make.names.html'>make.names</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/deparse.html'>deparse</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/substitute.html'>substitute</a></span>(<span class='no'>x</span>))),
  <span class='kw'>dir</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span>(),
  <span class='kw'>objfile</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>codeSetUp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>codeTearDown</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>...</span>
)

<span class='co'># S3 method for svTest</span>
<span class='fu'>makeUnit</span>(
  <span class='no'>x</span>,
  <span class='kw'>name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/make.names.html'>make.names</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/deparse.html'>deparse</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/substitute.html'>substitute</a></span>(<span class='no'>x</span>))),
  <span class='kw'>dir</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span>(),
  <span class='kw'>objfile</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>codeSetUp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>codeTearDown</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>...</span>
)

<span class='fu'>runTest</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>runTest</span>(
  <span class='no'>x</span>,
  <span class='kw'>name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/deparse.html'>deparse</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/substitute.html'>substitute</a></span>(<span class='no'>x</span>)),
  <span class='kw'>objfile</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>tag</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>msg</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='no'>...</span>
)

<span class='co'># S3 method for list</span>
<span class='fu'>runTest</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for svTest</span>
<span class='fu'>runTest</span>(
  <span class='no'>x</span>,
  <span class='kw'>name</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/deparse.html'>deparse</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/substitute.html'>substitute</a></span>(<span class='no'>x</span>)),
  <span class='kw'>objfile</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>tag</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>msg</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>packageName</th>
      <td><p>A character string identifying the package from which to
extract examples.</p></td>
    </tr>
    <tr>
      <th>manFilesDir</th>
      <td><p>A character string identifying the directory holding the
manual pages and examples.</p></td>
    </tr>
    <tr>
      <th>skipFailing</th>
      <td><p>A logical indicating whether missing or failing
documentation examples should be marked as <code>skipped</code> instead of as <code>failure</code>.</p></td>
    </tr>
    <tr>
      <th>testFun</th>
      <td><p>A function without arguments defining assertions (using
<code>checkxxx()</code> functions) for tests to be transformed into a 'svTest' object.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Any kind of object.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments to the method (not used yet).</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>The tests to place in the object (as 'test' attribute); could be
a 'svTest' object, or a function without arguments with
assertions (<code>checkxxx()</code> functions).</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>The name of a test.</p></td>
    </tr>
    <tr>
      <th>dir</th>
      <td><p>The directory where to create the test unit file.</p></td>
    </tr>
    <tr>
      <th>objfile</th>
      <td><p>The path to the file containing the original source code of
the object being tested. This argument is used to bring a context for a test
and allow a GUI to automatically open the source file for edition when the
user clicks on a test that failed or raised an error.</p></td>
    </tr>
    <tr>
      <th>codeSetUp</th>
      <td><p>An expression with some code you want to add to the
<code>.setUp()</code> function in your unit file (this function is executed before each
test.</p></td>
    </tr>
    <tr>
      <th>codeTearDown</th>
      <td><p>An expression with some code you want to add to the
<code>.tearDown()</code> function in your unit file (this function is executed after
each test.</p></td>
    </tr>
    <tr>
      <th>tag</th>
      <td><p>A tag is a character string identifying a location in source code
files (either a test unit file, or the original source code of the tested
objects defined in <code>objfile =</code>. This character string will be searched by the
text editor for easy location of the cursor near the corresponding test
command, or near the location in the original object that is concerned by
this test. Use any string you want to uniquely identify your tag, both in
your files, and in this argument.</p></td>
    </tr>
    <tr>
      <th>msg</th>
      <td><p>A message you want to associate with this test run.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A 'svTest' object for <code>svTest()</code>, <code>as.svTest()</code> and <code>test()</code>. Function
<code>is.svTest()</code> returns <code>TRUE</code> if 'x' is a 'svTest' object, and <code>is.test()</code>
does the same but also looks in the 'test' attribute if the class of 'x' is
not 'svTest' and returns <code>TRUE</code> if it finds something there.</p>
<p><code>makeUnit()</code> takes an object, extract its test function and write it in a
sourceable test unit on the disk (it should be compatible with 'RUnit' test
unit files too).</p>
<p><code>runTest()</code> returns invisibly a 'svTestData' object with all results after running specified tests.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='svSuite.html'>svSuite()</a></code>, <code><a href='svTestData.html'>is.svTestData()</a></code>, <code><a href='Log.html'>Log()</a></code>, <code><a href='check.html'>checkEquals()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='Log.html'>clearLog</a></span>()    <span class='co'># Clear the log file</span>

<span class='no'>foo</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>y</span> <span class='kw'>=</span> <span class='fl'>2</span>)
  <span class='fu'><a href='https://rdrr.io/r/base/function.html'>return</a></span>(<span class='no'>x</span> * <span class='no'>y</span>)
<span class='fu'>is.test</span>(<span class='no'>foo</span>)    <span class='co'># No</span></div><div class='output co'>#&gt; [1] FALSE</div><div class='input'><span class='co'># Create test cases for this function</span>
<span class='fu'>test</span>(<span class='no'>foo</span>) <span class='kw'>&lt;-</span> <span class='kw'>function</span>() {
  <span class='fu'><a href='check.html'>checkEqualsNumeric</a></span>(<span class='fl'>4</span>, <span class='fu'>foo</span>(<span class='fl'>2</span>))
  <span class='fu'><a href='check.html'>checkEqualsNumeric</a></span>(<span class='fl'>6</span>, <span class='fu'>foo</span>(<span class='fl'>2</span>, <span class='fl'>3</span>))
  <span class='fu'><a href='check.html'>checkTrue</a></span>(<span class='fu'>is.test</span>(<span class='no'>foo</span>))
  <span class='fu'><a href='check.html'>checkTrue</a></span>(<span class='fu'>is.test</span>(<span class='fu'>test</span>(<span class='no'>foo</span>)))
  <span class='fu'><a href='check.html'>checkIdentical</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span>(<span class='no'>foo</span>, <span class='st'>"test"</span>), <span class='fu'>test</span>(<span class='no'>foo</span>))
  <span class='fu'><a href='check.html'>checkException</a></span>(<span class='fu'>foo</span>(<span class='fl'>2</span>, <span class='st'>"aa"</span>))
  <span class='fu'><a href='check.html'>checkException</a></span>(<span class='fu'>foo</span>(<span class='st'>"bb"</span>))
}
<span class='fu'>is.test</span>(<span class='no'>foo</span>)    <span class='co'># Yes</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Create a test unit on disk and view it</span>
<span class='no'>unit</span> <span class='kw'>&lt;-</span> <span class='fu'>makeUnit</span>(<span class='no'>foo</span>)
<span class='fu'><a href='https://rdrr.io/r/base/file.show.html'>file.show</a></span>(<span class='no'>unit</span>, <span class='kw'>delete.file</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
}

<span class='co'># Run the test</span>
(<span class='fu'>runTest</span>(<span class='no'>foo</span>))</div><div class='output co'>#&gt; 
#&gt; == test(foo) run in less than 0.1 sec: OK
#&gt; 
#&gt; //Pass: 7 Fail: 0 Errors: 0//
#&gt; </div><div class='input'><span class='co'># Same as...</span>
<span class='no'>bar</span> <span class='kw'>&lt;-</span> <span class='fu'>test</span>(<span class='no'>foo</span>)
(<span class='fu'>runTest</span>(<span class='no'>bar</span>))</div><div class='output co'>#&gt; 
#&gt; == bar run in less than 0.1 sec: OK
#&gt; 
#&gt; //Pass: 7 Fail: 0 Errors: 0//
#&gt; </div><div class='input'>
<span class='co'># How fast can we run 100 times such kind of tests (700 test in total)?</span>
<span class='co'># (just an indication because in real situation with test unit files, we</span>
<span class='co'># have also the time required to source the units!)</span>
<span class='fu'><a href='https://rdrr.io/r/base/system.time.html'>system.time</a></span>(<span class='kw'>for</span> (<span class='no'>i</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>100</span>) <span class='fu'>runTest</span>(<span class='no'>foo</span>))[<span class='fl'>3</span>]</div><div class='output co'>#&gt; elapsed 
#&gt;   0.233 </div><div class='input'>
<span class='fu'>is.svTest</span>(<span class='fu'>test</span>(<span class='no'>foo</span>))    <span class='co'># Yes, of course!</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='co'># When an object without associated test is passed to runTest(),</span>
<span class='co'># a simple test containing only a DEACTIVATED entry is build</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>:<span class='fl'>10</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='fu'>runTest</span>(<span class='no'>x</span>))</div><div class='output co'>#&gt; * Object has no tests!:  ... DEACTIVATED
#&gt; 
#&gt; 
#&gt; == test(x) run in less than 0.1 sec: DEACTIVATED
#&gt; 
#&gt; //Pass: 0 Fail: 0 Errors: 0//
#&gt; </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='fu'><a href='Log.html'>Log</a></span>())</div><div class='output co'>#&gt; = A svUnit test suite run in less than 0.1 sec with:
#&gt; 
#&gt; * bar ... OK
#&gt; * test(x) ... DEACTIVATED
#&gt; * test(foo) ... OK
#&gt; 
#&gt; 
#&gt; == bar run in less than 0.1 sec: OK
#&gt; 
#&gt; //Pass: 7 Fail: 0 Errors: 0//
#&gt; 
#&gt; 
#&gt; == test(x) run in less than 0.1 sec: DEACTIVATED
#&gt; 
#&gt; //Pass: 0 Fail: 0 Errors: 0//
#&gt; 
#&gt; 
#&gt; == test(foo) run in less than 0.1 sec: OK
#&gt; 
#&gt; //Pass: 7 Fail: 0 Errors: 0//
#&gt; </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span>(<span class='no'>foo</span>, <span class='no'>bar</span>, <span class='no'>x</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://phgrosjean.sciviews.org'>Philippe Grosjean</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


