<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create and run test suites by collecting together unit tests and function tests defined in objects — svSuite • svUnit</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="152x152" href="../apple-touch-icon-152x152.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- svPkgdown --><script src="../script.js"></script><!-- themify icon --><link rel="stylesheet" href="../themify-icons.css?nocache=123"><!--<link rel="stylesheet" href="../style.css?nocache=123">--><!-- bootstrat v4.1.1, required CSS from more recent version --><link rel="stylesheet" href="../bootstrap.more.css?nocache=123"><link href="../style.css?nocache=123" rel="stylesheet"><!-- end of addition for svPkgdown --><meta property="og:title" content="Create and run test suites by collecting together unit tests and function tests defined in objects — svSuite"><meta property="og:description" content="A 'svSuite' object is essentially a list of test units directories (or
packages, in this case, corresponding directories are PKG/unitTests and its
subdirectories), and of object names containing tests to add temporarily to
the test suite. These must be formatted in a concise way as described for the
'tests' argument."><meta name="twitter:card" content="summary"><!-- Mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js" async integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/config/TeX-AMS-MML_HTMLorMML.js" async integrity="sha256-4zys9A4hMQmtq2EUL+JRoXc0NZi8jVJMzb8onewOaSQ=" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><!-- preloader start --><div class="preloader">
  <img src="../preloader.gif" alt="loading..."></div>
<!-- preloader end -->

<div class="navbar navbar-default navbar-fixed-top bg-secondary" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="navbar-brand-container">
       <div class="navbar-brand-logo">
         <a class="external-link navbar-brand" href="https://www.sciviews.org">
          <img src="../logo_full.png" alt="SciViews"></a>
       </div>
       <div class="navbar-brand-package">
      </div>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <!-- start svPkgdown global site search with Google -->
      <form action="https://www.google.com/search" class="navbar-form navbar-right search-form-global">
        <div class="form-group has-search">
          <span class="fa fa-search form-control-feedback-global"></span>
          <input type="text" class="form-control-global search-form-input" name="q" id="q" placeholder="Search..." required><input type="hidden" name="sitesearch" value="https://www.sciviews.org"></div>
      </form>
      <!-- end svPkgdown global site search with Google -->
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/svUnit.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/SciViews/svUnit/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul><div class="navbar-title">
        <a class="navbar-brand" href="../index.html"><p class="h2">svUnit <small>v1.0.7</small></p></a>
      </div>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
  <div class="navbar-spacer bg-light">
  </div>
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create and run test suites by collecting together unit tests and function tests defined in objects</h1>
    <small class="dont-index">Source: <a href="https://github.com/SciViews/svUnit/blob/main/R/svSuite.R" class="external-link"><code>R/svSuite.R</code></a></small>
    <div class="hidden name"><code>svSuite.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A 'svSuite' object is essentially a list of test units directories (or
packages, in this case, corresponding directories are PKG/unitTests and its
subdirectories), and of object names containing tests to add temporarily to
the test suite. These must be formatted in a concise way as described for the
'tests' argument.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">svSuite</span><span class="op">(</span><span class="va">tests</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as.svSuite</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is.svSuite</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'svSuite'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">svSuiteList</span><span class="op">(</span></span>
<span>  packages <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  objects <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dirs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"svUnit.dirs"</span><span class="op">)</span>,</span>
<span>  excludeList <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"svUnit.excludeList"</span><span class="op">)</span>,</span>
<span>  pos <span class="op">=</span> <span class="va">.GlobalEnv</span>,</span>
<span>  loadPackages <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'svSuite'</span></span>
<span><span class="fu"><a href="svTest.html">makeUnit</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  objfile <span class="op">=</span> <span class="st">""</span>,</span>
<span>  codeSetUp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  codeTearDown <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pos <span class="op">=</span> <span class="va">.GlobalEnv</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'svSuite'</span></span>
<span><span class="fu"><a href="svTest.html">runTest</a></span><span class="op">(</span><span class="va">x</span>, name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, unitname <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-tests">tests<a class="anchor" aria-label="anchor" href="#arg-tests"></a></dt>
<dd><p>A character string with items to include in the test suite. It
could be 'package:PKG' for including test units located in the /unitTests
subdirectory of the package PGK, or 'package:PKG (SUITE)' for test units
located in the subdirectory /unitTests/SUITE of package PKG, or 'dir:MYDIR'
for including test units in MYDIR, or 'test(OBJ)' for tests embedded in an
object, or 'OBJ' for 'svTest' object directly.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Any kind of object.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments to pass to <code><a href="svTest.html">makeUnit()</a></code> or <code><a href="svTest.html">runTest()</a></code> (not used
yet).</p></dd>


<dt id="arg-packages">packages<a class="anchor" aria-label="anchor" href="#arg-packages"></a></dt>
<dd><p>Do we list test units available in loaded packages?
Alternatively one can provide a character vector of package names, and it
will be used to filter packages (take care: in this case it will look at
installed packages, not only loaded packages)!</p></dd>


<dt id="arg-objects">objects<a class="anchor" aria-label="anchor" href="#arg-objects"></a></dt>
<dd><p>Do we list test available in objects? Alternatively, one can
provide a character vector of object names, and it will filter objects in
'pos' according to this vector.</p></dd>


<dt id="arg-dirs">dirs<a class="anchor" aria-label="anchor" href="#arg-dirs"></a></dt>
<dd><p>An additional list of directories where to look for more test
units. For convenience, this list can simply be saved as an 'svUnit.dirs'
options.</p></dd>


<dt id="arg-excludelist">excludeList<a class="anchor" aria-label="anchor" href="#arg-excludelist"></a></dt>
<dd><p>A list of items to exclude from the listing. The function
uses regular expression to match the exclusions. So, for instance, specifying
<code>"package:MYPKG"</code> will exclude all items from package 'MYPKG', while using
<code>"package:MYPKG$"</code> will exclude only tests suites defined in the
.../MYPKG/unitTests directory, bur not in its subdirectories. For
convenience, it can be saved in a 'svUnit.excludeList' option. By default,
all tests for packages whose name start with 'sv' or 'RUnit' are excluded,
that is, <code>c("package:sv", "package:RUnit")</code>.</p></dd>


<dt id="arg-pos">pos<a class="anchor" aria-label="anchor" href="#arg-pos"></a></dt>
<dd><p>The environment to look for 'objects' (environment, character
string with name of an environment, or integer with position of the
environment in the search path.</p></dd>


<dt id="arg-loadpackages">loadPackages<a class="anchor" aria-label="anchor" href="#arg-loadpackages"></a></dt>
<dd><p>In the case a list of packages is provided in
<code>packages =</code>, do we make sure that these packages are loaded? If yes, the
function will try to load all packages in that list that are not loaded yet
and will issue a warning for the packages not found. Default, <code>FALSE</code>.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>The name of the test suite to build.</p></dd>


<dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>The directory where to create the test unit file.</p></dd>


<dt id="arg-objfile">objfile<a class="anchor" aria-label="anchor" href="#arg-objfile"></a></dt>
<dd><p>The path to the file containing the original source code of
the object being tested. This argument is used to bring a context for a
test and allow a GUI to automatically open the source file for edition when
the user clicks on a test that failed or raised an error.</p></dd>


<dt id="arg-codesetup">codeSetUp<a class="anchor" aria-label="anchor" href="#arg-codesetup"></a></dt>
<dd><p>An expression with some code you want to add to the
<code>.setUp()</code> function in your unit file (this function is executed before each
test.</p></dd>


<dt id="arg-codeteardown">codeTearDown<a class="anchor" aria-label="anchor" href="#arg-codeteardown"></a></dt>
<dd><p>An expression with some code you want to add to the
<code>.tearDown()</code> function in your unit file (this function is executed after
each test.</p></dd>


<dt id="arg-unitname">unitname<a class="anchor" aria-label="anchor" href="#arg-unitname"></a></dt>
<dd><p>The name of a unit to run inside the suite. If <code>NULL</code> (by
default), all units are run.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>svSuite()</code>, <code>as.svSuite()</code> and <code>svSuiteList()</code> return a 'svSuite' object.
<code>is.svSuite()</code> returns <code>TRUE</code> if the object is an 'svSuite'.</p>
<p><code><a href="svTest.html">makeUnit()</a></code> creates a test unit file on disk, and <code><a href="svTest.html">runTest()</a></code> runs the tests
in such a file. They are used for their side-effect, but the first one also
returns the file created, and the second one returns invisibly the list of
all test unit files that where sourced ans run.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>svSuiteList()</code> lists all loaded packages having /unitTests/runit*.R files
(or similar files in subdirectories), and all objects in the user workspace
that have a 'test' attribute, or are 'svTest' objects (by default). It is a
rather exhaustive list of all test items currently available in the current R
session, but restricted by <code>getOption("svUnit.excludeList")</code>.</p>
<p><code><a href="svTest.html">makeUnit()</a></code> writes a test unit on disk with the tests from the objects
listed in the 'svSuite' object that do not belong yet to a test unit.
<code><a href="svTest.html">runTest()</a></code> runs all the test in packages, directories and objects listed in
the 'svSuite' object.</p>
<p>Thanks to the variety of sources allowed for tests, it is possible to define
these tests in a structured way, inside packages, like for the 'RUnit'
package (but with automatic recognition of test units associated to packages,
in the present case). It is also easy to define tests more loosely by just
attaching those tests to the objects you want to check. Whenever there objects
are loaded in the user's workspace, their tests are available. In both cases,
a test unit file on disk is sourced in a local environment and test functions
are run (same approach as in the 'RUnit' package, and the same test unit files
should be compatibles with both 'RUnit' and 'svUnit' packages), but in the
case of a loosely definition of the tests by attachment to objects, the test
unit file is created on the fly in the temporary directory (by default).</p>
<p>At any time, you can transform a series of tests loosely attached to objects
into a test unit file by applying <code><a href="svTest.html">makeUnit()</a></code> to a 'svSuite' object,
probably specifying another directory than the (default) temporary dir for
more permanent storage of your test unit file. The best choice is the
'/inst/unitTests' directory of a package source, or one of its
subdirectories. That way, your test unit file(s) will be automatically listed
and available each time you load the compiled package in R (if you list them
using <code>svSuiteList()</code>). Of course, you still can exclude tests from given
packages by adding 'package:PKG' in the exclusion list with something
like: <code>options(svUnit.excludeList = c(getOption("svUnit.excludeList"), "package:PKG"))</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="svSuiteData.html">svSuiteData()</a></code>, <code><a href="svTest.html">svTest()</a></code>, <code><a href="Log.html">Log()</a></code>, <code><a href="check.html">checkEquals()</a></code>, <code><a href="https://rdrr.io/pkg/RUnit/man/checkFuncs.html" class="external-link">RUnit::checkEquals()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Philippe Grosjean</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">svSuiteList</span><span class="op">(</span><span class="op">)</span> <span class="co"># List all currently available test units and test cases</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An empty svUnit test suite</span>
<span class="r-in"><span><span class="co"># Exclusion list is used (regular expression filtering!). It contains:</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">oex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"svUnit.excludeList"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "package:sv"    "package:RUnit"</span>
<span class="r-in"><span><span class="co"># Clear it, and relist available test units</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>svUnit.excludeList <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">svSuiteList</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A svUnit test suite definition with:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Test suites:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "package:svUnit"                "package:svUnit (BadTests)"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "package:svUnit (VirtualClass)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Two functions that include their test cases</span></span></span>
<span class="r-in"><span><span class="va">Square</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="svTest.html">test</a></span><span class="op">(</span><span class="va">Square</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check.html">checkEquals</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fu">Square</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check.html">checkEquals</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">9</span><span class="op">)</span>, <span class="fu">Square</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check.html">checkException</a></span><span class="op">(</span><span class="fu">Square</span><span class="op">(</span><span class="st">"xx"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Cube</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="svTest.html">test</a></span><span class="op">(</span><span class="va">Cube</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check.html">checkEquals</a></span><span class="op">(</span><span class="fl">27</span>, <span class="fu">Cube</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check.html">checkEquals</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span>, <span class="fl">28</span><span class="op">)</span>, <span class="fu">Cube</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check.html">checkException</a></span><span class="op">(</span><span class="fu">Cube</span><span class="op">(</span><span class="st">"xx"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A separate test case object (not attached to a particular object)</span></span></span>
<span class="r-in"><span><span class="co"># This is the simplest way to define quick and durty integration tests</span></span></span>
<span class="r-in"><span><span class="va">test_Integrate</span> <span class="op">&lt;-</span> <span class="fu"><a href="svTest.html">svTest</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check.html">checkTrue</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">2</span>, <span class="st">"check1"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">v</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>   <span class="co"># The reference</span></span></span>
<span class="r-in"><span>  <span class="va">w</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>   <span class="co"># The value to compare to the reference</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="check.html">checkEquals</a></span><span class="op">(</span><span class="va">v</span>, <span class="va">w</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A function without test cases (will be filtered out of the suite list)</span></span></span>
<span class="r-in"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Look now which tests are available</span></span></span>
<span class="r-in"><span><span class="fu">svSuiteList</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A svUnit test suite definition with:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Test suites:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "package:svUnit"                "package:svUnit (BadTests)"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "package:svUnit (VirtualClass)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only objects, no package units</span></span></span>
<span class="r-in"><span><span class="fu">svSuiteList</span><span class="op">(</span>packages <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An empty svUnit test suite</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create the test unit file for all objects with tests in .GlobalEnv</span></span></span>
<span class="r-in"><span><span class="va">myunit</span> <span class="op">&lt;-</span> <span class="fu"><a href="svTest.html">makeUnit</a></span><span class="op">(</span><span class="fu">svSuiteList</span><span class="op">(</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"AllTests"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="va">myunit</span>, delete.file <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter objects using a list (object with/without tests and a nonexisting obj)</span></span></span>
<span class="r-in"><span><span class="fu">svSuiteList</span><span class="op">(</span>packages <span class="op">=</span> <span class="cn">FALSE</span>, objects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cube"</span>, <span class="st">"foo"</span>, <span class="st">"bar"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An empty svUnit test suite</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create another svSuite object with selected test items</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">mysuite</span> <span class="op">&lt;-</span> <span class="fu">svSuite</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"package:svUnit (VirtualClass)"</span>, <span class="st">"test(Cube)"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A svUnit test suite definition with:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Test suite:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "package:svUnit (VirtualClass)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Test function:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "test(Cube)"</span>
<span class="r-in"><span><span class="fu">is.svSuite</span><span class="op">(</span><span class="va">mysuite</span><span class="op">)</span>  <span class="co"># Should be!</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Run all the tests currently available</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="fu"><a href="svTest.html">runTest</a></span><span class="op">(</span><span class="fu">svSuiteList</span><span class="op">(</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"AllTests"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="Log.html">Log</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Restore previous exclusion list, and clean up the environment</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>svUnit.excludeList <span class="op">=</span> <span class="va">oex</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">Square</span>, <span class="va">Cube</span>, <span class="va">foo</span>, <span class="va">test_Integrate</span>, <span class="va">mysuite</span>, <span class="va">myunit</span>, <span class="va">oex</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>object 'myunit' not found</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><!-- footer --><!--<footer class="bg-secondary">--><div class="bg-secondary full-width">
    <div class="py-100 border-bottom" style="border-color: #454547 !important">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <div class="mb-5 mb-md-0 text-center text-md-left">
                        <!-- logo -->
                        <img class="mb-30" src="https://www.sciviews.org/images/logo-footer.png" alt="logo"><p class="text-white mb-30"> We build software for reproducible research with R</p>
                        <!-- social icon -->
                        <ul class="list-inline"><li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://github.com/SciViews">
                                    <i class="ti-github"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://twitter.com/PhilGrosjean">
                                    <i class="ti-twitter-alt"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://www.linkedin.com/in/philippe-grosjean-5b6b29a2/">
                                    <i class="ti-linkedin"></i>
                                </a>
                            </li>

                        </ul></div>
                </div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Related</p>
                    <ul class="footer-links"><li>
                            <a href="http://econum.umons.ac.be" class="external-link">Our Lab</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/fs/en/" class="external-link">Our Faculty</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/complexys/en/" class="external-link">Complexys</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/infortech/en/" class="external-link">InforTech</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/en/" class="external-link">UMONS</a>
                        </li>

                    </ul></div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Quick Link</p>
                    <ul class="footer-links"><li>
                            <a href="https://www.sciviews.org/software/svbox" class="external-link">SciViews Box</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/sciviews-r" class="external-link">SciViews::R</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/zooimage" class="external-link">Zoo/PhytoImage</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/blog" class="external-link">Blog</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/about" class="external-link">About</a>
                        </li>

                    </ul></div>
                <!-- subscribe form -->
                <div class="col-lg-3 col-md-12 offset-lg-1">
                    <div class="mt-5 mt-lg-0 text-center text-md-left">
                             <p class="h4 mb-4 text-white">Contact Us</p>
                             <p class="text-white mb-4">Need more info?<br><a href="mailto:info@sciviews.org"><span class="text-primary">Leave us a mail...</span></a></p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- copyright -->
    <div class="pt-4 pb-3 position-relative">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-5">
                    <p class="text-white text-center text-md-left">
                        <span class="text-primary">SciViews</span> © All Right Reserved</p>
                </div>
                <div class="col-lg-6 col-md-7">
                    <ul class="list-inline text-center text-md-right"><li class="list-inline-item mx-lg-3 my-lg-0 mx-2 my-2">
                            <a class="external-link font-secondary text-white" href="https://creativecommons.org/licenses/by/4.0/">Site content under CC-BY 4.0 license</a>
                        </li>

                    </ul></div>
            </div>
        </div>
        <!-- back to top -->
        <!--<button class="back-to-top">
            <i class="ti-angle-up"></i>
        </button>-->
    </div>
</div>
<!--</footer>-->
<!-- /footer -->

      </footer></div>






  </body></html>

